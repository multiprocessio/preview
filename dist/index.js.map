{
  "version": 3,
  "sources": ["../preview.ts"],
  "sourcesContent": ["function unsafePreviewArray(\n  obj: any,\n  nKeys: number,\n  nextNKeys: number,\n  prefixChar: string,\n  joinChar: string\n) {\n  const keys = obj.slice(0, nKeys);\n  const childPreview = keys.map(\n    (o: string) => prefixChar + unsafePreview(o, nextNKeys)\n  );\n  if (obj.length > nKeys) {\n    childPreview.push(prefixChar + '...');\n  }\n  return ['[', childPreview.join(',' + joinChar), ']'].join(joinChar);\n}\n\nfunction unsafePreviewObject(\n  obj: any,\n  nKeys: number,\n  nextNKeys: number,\n  prefixChar: string,\n  joinChar: string\n) {\n  const keys = Object.keys(obj);\n  keys.sort();\n  const firstKeys = keys.slice(0, nKeys);\n  const preview: Array<any> = [];\n  firstKeys.forEach((k) => {\n    const formattedKey = `\"${k.replaceAll('\"', '\\\\\"')}\"`;\n    preview.push(\n      prefixChar + formattedKey + ': ' + unsafePreview(obj[k], nextNKeys)\n    );\n  });\n\n  if (keys.length > nKeys) {\n    preview.push(prefixChar + '...');\n  }\n\n  return ['{', preview.join(',' + joinChar), '}'].join(joinChar);\n}\n\nfunction unsafePreview(obj: any, nKeys: number, topLevel = false): string {\n  if (!obj) {\n    return String(obj);\n  }\n\n  // Decrease slightly slower than (nKeys / 2) each time\n  const nextNKeys = nKeys < 1 ? 0 : Math.floor(nKeys * 0.6);\n  const joinChar = topLevel ? '\\n' : ' ';\n  const prefixChar = topLevel ? '  ' : '';\n\n  if (Array.isArray(obj)) {\n    return unsafePreviewArray(obj, nKeys, nextNKeys, prefixChar, joinChar);\n  }\n\n  if (typeof obj === 'object') {\n    return unsafePreviewObject(obj, nKeys, nextNKeys, prefixChar, joinChar);\n  }\n\n  let stringMax = 200;\n  if (typeof obj === 'string' && topLevel) {\n    stringMax = 5000;\n  }\n\n  // Truncate before quoting\n  let res = String(obj).slice(0, stringMax);\n  if (String(obj).length > stringMax) {\n    res += '...';\n  }\n\n  if (typeof obj === 'string' && !topLevel) {\n    return `\"${res.replaceAll('\"', '\\\\\"')}\"`;\n  }\n\n  return res;\n}\n\nexport function preview(obj: any, nKeys = 20): string {\n  try {\n    return unsafePreview(obj, nKeys, true);\n  } catch (e) {\n    console.error(e);\n    return String(obj).slice(0, 200);\n  }\n}\n"],
  "mappings": "qIAAA,sCACE,EACA,EACA,EACA,EACA,EACA,CAEA,GAAM,GAAe,AADR,EAAI,MAAM,EAAG,GACA,IACxB,AAAC,GAAc,EAAa,EAAc,EAAG,IAE/C,MAAI,GAAI,OAAS,GACf,EAAa,KAAK,EAAa,OAE1B,CAAC,IAAK,EAAa,KAAK,IAAM,GAAW,KAAK,KAAK,GAG5D,WACE,EACA,EACA,EACA,EACA,EACA,CACA,GAAM,GAAO,OAAO,KAAK,GACzB,EAAK,OACL,GAAM,GAAY,EAAK,MAAM,EAAG,GAC1B,EAAsB,GAC5B,SAAU,QAAQ,AAAC,GAAM,CACvB,GAAM,GAAe,IAAI,EAAE,WAAW,IAAK,UAC3C,EAAQ,KACN,EAAa,EAAe,KAAO,EAAc,EAAI,GAAI,MAIzD,EAAK,OAAS,GAChB,EAAQ,KAAK,EAAa,OAGrB,CAAC,IAAK,EAAQ,KAAK,IAAM,GAAW,KAAK,KAAK,GAGvD,WAAuB,EAAU,EAAe,EAAW,GAAe,CACxE,GAAI,CAAC,EACH,MAAO,QAAO,GAIhB,GAAM,GAAY,EAAQ,EAAI,EAAI,KAAK,MAAM,EAAQ,IAC/C,EAAW,EAAW;AAAA,EAAO,IAC7B,EAAa,EAAW,KAAO,GAErC,GAAI,MAAM,QAAQ,GAChB,MAAO,GAAmB,EAAK,EAAO,EAAW,EAAY,GAG/D,GAAI,MAAO,IAAQ,SACjB,MAAO,GAAoB,EAAK,EAAO,EAAW,EAAY,GAGhE,GAAI,GAAY,IAChB,AAAI,MAAO,IAAQ,UAAY,GAC7B,GAAY,KAId,GAAI,GAAM,OAAO,GAAK,MAAM,EAAG,GAK/B,MAJI,QAAO,GAAK,OAAS,GACvB,IAAO,OAGL,MAAO,IAAQ,UAAY,CAAC,EACvB,IAAI,EAAI,WAAW,IAAK,UAG1B,EAGF,WAAiB,EAAU,EAAQ,GAAY,CACpD,GAAI,CACF,MAAO,GAAc,EAAK,EAAO,UAC1B,EAAP,CACA,eAAQ,MAAM,GACP,OAAO,GAAK,MAAM,EAAG",
  "names": []
}
