{
  "version": 3,
  "sources": ["../preview.ts"],
  "sourcesContent": ["function unsafePreviewArray(\r\n  obj: any,\r\n  nKeys: number,\r\n  nextNKeys: number,\r\n  prefixChar: string,\r\n  joinChar: string\r\n) {\r\n  const keys = obj.slice(0, nKeys);\r\n  const childPreview = keys.map(\r\n    (o: string) => prefixChar + unsafePreview(o, nextNKeys)\r\n  );\r\n  if (obj.length > nKeys) {\r\n    childPreview.push(prefixChar + '...');\r\n  }\r\n  return ['[', childPreview.join(',' + joinChar), ']'].join(joinChar);\r\n}\r\n\r\nfunction unsafePreviewObject(\r\n  obj: any,\r\n  nKeys: number,\r\n  nextNKeys: number,\r\n  prefixChar: string,\r\n  joinChar: string\r\n) {\r\n  const keys = Object.keys(obj);\r\n  keys.sort();\r\n  const firstKeys = keys.slice(0, nKeys);\r\n  const preview: Array<any> = [];\r\n  firstKeys.forEach((k) => {\r\n    const formattedKey = `\"${k.split('\"').join('\\\\\"')}\"`;\r\n    preview.push(\r\n      prefixChar + formattedKey + ': ' + unsafePreview(obj[k], nextNKeys)\r\n    );\r\n  });\r\n\r\n  if (keys.length > nKeys) {\r\n    preview.push(prefixChar + '...');\r\n  }\r\n\r\n  return ['{', preview.join(',' + joinChar), '}'].join(joinChar);\r\n}\r\n\r\nfunction unsafePreview(obj: any, nKeys: number, topLevel = false): string {\r\n  if (!obj) {\r\n    return String(obj);\r\n  }\r\n\r\n  // Decrease slightly slower than (nKeys / 2) each time\r\n  const nextNKeys = nKeys < 1 ? 0 : Math.floor(nKeys * 0.6);\r\n  const joinChar = topLevel ? '\\n' : ' ';\r\n  const prefixChar = topLevel ? '  ' : '';\r\n\r\n  if (Array.isArray(obj)) {\r\n    return unsafePreviewArray(obj, nKeys, nextNKeys, prefixChar, joinChar);\r\n  }\r\n\r\n  if (typeof obj === 'object') {\r\n    return unsafePreviewObject(obj, nKeys, nextNKeys, prefixChar, joinChar);\r\n  }\r\n\r\n  let stringMax = 200;\r\n  if (typeof obj === 'string' && topLevel) {\r\n    stringMax = 5000;\r\n  }\r\n\r\n  // Truncate before quoting\r\n  let res = String(obj).slice(0, stringMax);\r\n  if (String(obj).length > stringMax) {\r\n    res += '...';\r\n  }\r\n\r\n  if (typeof obj === 'string' && !topLevel) {\r\n    return `\"${res.split('\"').join('\\\\\"')}\"`;\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nexport function preview(obj: any, nKeys = 20): string {\r\n  try {\r\n    return unsafePreview(obj, nKeys, true);\r\n  } catch (e) {\r\n    console.error(e);\r\n    return String(obj).slice(0, 200);\r\n  }\r\n}\r\n"],
  "mappings": "qIAAA,sCACE,EACA,EACA,EACA,EACA,EACA,CAEA,GAAM,GAAe,AADR,EAAI,MAAM,EAAG,GACA,IACxB,AAAC,GAAc,EAAa,EAAc,EAAG,IAE/C,MAAI,GAAI,OAAS,GACf,EAAa,KAAK,EAAa,OAE1B,CAAC,IAAK,EAAa,KAAK,IAAM,GAAW,KAAK,KAAK,GAG5D,WACE,EACA,EACA,EACA,EACA,EACA,CACA,GAAM,GAAO,OAAO,KAAK,GACzB,EAAK,OACL,GAAM,GAAY,EAAK,MAAM,EAAG,GAC1B,EAAsB,GAC5B,SAAU,QAAQ,AAAC,GAAM,CACvB,GAAM,GAAe,IAAI,EAAE,MAAM,KAAK,KAAK,UAC3C,EAAQ,KACN,EAAa,EAAe,KAAO,EAAc,EAAI,GAAI,MAIzD,EAAK,OAAS,GAChB,EAAQ,KAAK,EAAa,OAGrB,CAAC,IAAK,EAAQ,KAAK,IAAM,GAAW,KAAK,KAAK,GAGvD,WAAuB,EAAU,EAAe,EAAW,GAAe,CACxE,GAAI,CAAC,EACH,MAAO,QAAO,GAIhB,GAAM,GAAY,EAAQ,EAAI,EAAI,KAAK,MAAM,EAAQ,IAC/C,EAAW,EAAW;AAAA,EAAO,IAC7B,EAAa,EAAW,KAAO,GAErC,GAAI,MAAM,QAAQ,GAChB,MAAO,GAAmB,EAAK,EAAO,EAAW,EAAY,GAG/D,GAAI,MAAO,IAAQ,SACjB,MAAO,GAAoB,EAAK,EAAO,EAAW,EAAY,GAGhE,GAAI,GAAY,IAChB,AAAI,MAAO,IAAQ,UAAY,GAC7B,GAAY,KAId,GAAI,GAAM,OAAO,GAAK,MAAM,EAAG,GAK/B,MAJI,QAAO,GAAK,OAAS,GACvB,IAAO,OAGL,MAAO,IAAQ,UAAY,CAAC,EACvB,IAAI,EAAI,MAAM,KAAK,KAAK,UAG1B,EAGF,WAAiB,EAAU,EAAQ,GAAY,CACpD,GAAI,CACF,MAAO,GAAc,EAAK,EAAO,UAC1B,EAAP,CACA,eAAQ,MAAM,GACP,OAAO,GAAK,MAAM,EAAG",
  "names": []
}
