{
  "version": 3,
  "sources": ["../preview.ts"],
  "sourcesContent": ["function unsafePreviewArray(\n  obj: any,\n  nKeys: number,\n  nextNKeys: number,\n  prefixChar: string,\n  joinChar: string\n) {\n  const keys = obj.slice(0, nKeys);\n  const childPreview = keys.map(\n    (o: string) => prefixChar + unsafePreview(o, nextNKeys)\n  );\n  if (obj.length > nKeys) {\n    childPreview.push(prefixChar + '...');\n  }\n  return ['[', childPreview.join(',' + joinChar), ']'].join(joinChar);\n}\n\nfunction unsafePreviewObject(\n  obj: any,\n  nKeys: number,\n  nextNKeys: number,\n  prefixChar: string,\n  joinChar: string\n) {\n  const keys = Object.keys(obj);\n  keys.sort();\n  const firstKeys = keys.slice(0, nKeys);\n  const preview: Array<any> = [];\n  firstKeys.forEach((k) => {\n    const formattedKey = `\"${k.replaceAll('\"', '\\\\\"')}\"`;\n    preview.push(\n      prefixChar + formattedKey + ': ' + unsafePreview(obj[k], nextNKeys)\n    );\n  });\n\n  if (keys.length > nKeys) {\n    preview.push(prefixChar + '...');\n  }\n\n  return ['{', preview.join(',' + joinChar), '}'].join(joinChar);\n}\n\nfunction unsafePreview(obj: any, nKeys: number, topLevel = false): string {\n  if (!obj) {\n    return String(obj);\n  }\n\n  // Decrease slightly slower than (nKeys / 2) each time\n  const nextNKeys = nKeys < 1 ? 0 : Math.floor(nKeys * 0.6);\n  const joinChar = topLevel ? '\\n' : ' ';\n  const prefixChar = topLevel ? '  ' : '';\n\n  if (Array.isArray(obj)) {\n    return unsafePreviewArray(obj, nKeys, nextNKeys, prefixChar, joinChar);\n  }\n\n  if (typeof obj === 'object') {\n    return unsafePreviewObject(obj, nKeys, nextNKeys, prefixChar, joinChar);\n  }\n\n  let stringMax = 200;\n  if (typeof obj === 'string' && topLevel) {\n    stringMax = 5000;\n  }\n\n  // Truncate before quoting\n  let res = String(obj).slice(0, stringMax);\n  if (String(obj).length > stringMax) {\n    res += '...';\n  }\n\n  if (typeof obj === 'string' && !topLevel) {\n    return `\"${res.replaceAll('\"', '\\\\\"')}\"`;\n  }\n\n  return res;\n}\n\nexport function preview(obj: any, nKeys = 20): string {\n  try {\n    return unsafePreview(obj, nKeys, true);\n  } catch (e) {\n    console.error(e);\n    return String(obj).slice(0, 200);\n  }\n}\n"],
  "mappings": "AAAA,4BACE,KACA,OACA,WACA,YACA,UACA;AACA,QAAM,OAAO,IAAI,MAAM,GAAG;AAC1B,QAAM,eAAe,KAAK,IACxB,CAAC,MAAc,aAAa,cAAc,GAAG;AAE/C,MAAI,IAAI,SAAS,OAAO;AACtB,iBAAa,KAAK,aAAa;AAAA;AAEjC,SAAO,CAAC,KAAK,aAAa,KAAK,MAAM,WAAW,KAAK,KAAK;AAAA;AAG5D,6BACE,KACA,OACA,WACA,YACA,UACA;AACA,QAAM,OAAO,OAAO,KAAK;AACzB,OAAK;AACL,QAAM,YAAY,KAAK,MAAM,GAAG;AAChC,QAAM,WAAsB;AAC5B,YAAU,QAAQ,CAAC,MAAM;AACvB,UAAM,eAAe,IAAI,EAAE,WAAW,KAAK;AAC3C,aAAQ,KACN,aAAa,eAAe,OAAO,cAAc,IAAI,IAAI;AAAA;AAI7D,MAAI,KAAK,SAAS,OAAO;AACvB,aAAQ,KAAK,aAAa;AAAA;AAG5B,SAAO,CAAC,KAAK,SAAQ,KAAK,MAAM,WAAW,KAAK,KAAK;AAAA;AAGvD,uBAAuB,KAAU,OAAe,WAAW,OAAe;AACxE,MAAI,CAAC,KAAK;AACR,WAAO,OAAO;AAAA;AAIhB,QAAM,YAAY,QAAQ,IAAI,IAAI,KAAK,MAAM,QAAQ;AACrD,QAAM,WAAW,WAAW,OAAO;AACnC,QAAM,aAAa,WAAW,OAAO;AAErC,MAAI,MAAM,QAAQ,MAAM;AACtB,WAAO,mBAAmB,KAAK,OAAO,WAAW,YAAY;AAAA;AAG/D,MAAI,OAAO,QAAQ,UAAU;AAC3B,WAAO,oBAAoB,KAAK,OAAO,WAAW,YAAY;AAAA;AAGhE,MAAI,YAAY;AAChB,MAAI,OAAO,QAAQ,YAAY,UAAU;AACvC,gBAAY;AAAA;AAId,MAAI,MAAM,OAAO,KAAK,MAAM,GAAG;AAC/B,MAAI,OAAO,KAAK,SAAS,WAAW;AAClC,WAAO;AAAA;AAGT,MAAI,OAAO,QAAQ,YAAY,CAAC,UAAU;AACxC,WAAO,IAAI,IAAI,WAAW,KAAK;AAAA;AAGjC,SAAO;AAAA;AAGF,wBAAiB,KAAU,QAAQ,IAAY;AACpD,MAAI;AACF,WAAO,cAAc,KAAK,OAAO;AAAA,WAC1B,GAAP;AACA,YAAQ,MAAM;AACd,WAAO,OAAO,KAAK,MAAM,GAAG;AAAA;AAAA;",
  "names": []
}
